<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/mycss.css">
</head>
<body>
    <div class="container">
        <div class="row justify-content-center align-items-center mt-5">
            <div class="col-md-6">
                <div class="card shadow-lg">
                    <div class="card-header h3 fw-900 text-bg-success text-center">產品建檔</div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label for="" class="form-label">產品名稱</label>
                            <input type="text" class="form-control"placeholder="產品名稱字數2~8" id="p_name" list="foodlist">
                            <datalist id="foodlist">
                                <option value="美式咖啡"></option>
                                <option value="拿鐵咖啡"></option>
                                <option value="紅茶"></option>
                                <option value="綠茶"></option>
                            </datalist>
                            <div class="invalid-feedback">產品名稱不符合規定!</div>
                            <div class="valid-feedback">產品名稱符合規定!</div>
                        </div>
                          <div class="mb-3">
                            <label for="" class="form-label">產品價格</label>
                            <input type="number" min="1" max="100" value="" class="form-control"placeholder="產品價格1~100"id=p_price>
                            <div class="invalid-feedback">產品名稱不符合規定!</div>
                            <div class="valid-feedback">產品名稱符合規定!</div>
                        </div>
                        <div class="mb-3">
                            <select name="" id="packing" class="form-select form-select-lg is-invalid">
                            <option value=""select disabled>--包裝尺寸(必選)--</option>
                            <option value="S">S</option>
                            <option value="M">M</option>
                            <option value="L">L</option>
                            <option value="XL">XL</option>
                            </select>
                            <div class="valid-feedback">已選擇包裝</div>
                            <div class="invalid-feedback">未選擇包裝!</div>
                        </div>
                        <div class="mb-3">
                            <div class="h4">訂單數量</div>
                            <label for="" class="form-label">數量: <span class="h2 fw-900" id="count-text">1</span>個</label>
                            <input type="range" class="form-range" name="" id="count01" min="1" max="100" value="10">
                        </div>
                        <div class="mb-3">
                            <div class="h4">配送方式</div>
                            <div class="form-check" >
                                <input type="checkbox" name="chk01" class="form-check-input" value="宅配">
                                <label for="" class="form-check-label">宅配</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" name="chk01" class="form-check-input" value="7-11">
                                <label for="" class="form-check-label">7-11</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" name="chk01" class="form-check-input" value="全家">
                                <label for="" class="form-check-label">全家</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" name="chk01" class="form-check-input" value="蝦皮">
                                <label for="" class="form-check-label">蝦皮</label>
                            </div>
                        </div>
                        <div class="mb-3">
                            <div class="h4">付款方式:</div>
                            <div class="form-check">
                                <input type="radio"name="radio01"id="" class="form-check-input" value="現金">
                                <label for=""class="form-check-label">現金</label>
                            </div>
                             <div class="form-check">
                                <input type="radio"name="radio01"id="" class="form-check-input" value="ATM轉帳">
                                <label for=""class="form-check-label">ATM轉帳</label>
                            </div>
                             <div class="form-check">
                                <input type="radio"name="radio01"id="" class="form-check-input" value="信用卡">
                                <label for=""class="form-check-label">信用卡</label>
                            </div>
                             <div class="form-check">
                                <input type="radio"name="radio01"id="" class="form-check-input" value="電子支付">
                                <label for=""class="form-check-label">電子支付</label>
                            </div>
                        </div>
                        <div class="mb-3">
                        <div class="h4">產品狀態</div>
                            <div class="form-check form-switch">
                                <input type="checkbox" name="" id="switch01" class="form-check-input">
                                <label for="" class="form-check-label" >下架</label>
                            </div>
                        </div>
                        <div class="text-center">
                            <button class="btn btn-secondary">取消</button>
                            <button class="btn btn-primary"id="ok_btn">確認</button>
                        </div>
                    </div>    
                </div>
            </div>
        </div>
        <!-- 資料顯示區 -->
         <div class="row justify-content-center">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header text-bg-dark text-center h3">產品表單</div>
                    <div class="card-body" id="my_card_body">
                        <div class="h2"><span class="h3 fw-900">產品名稱</span></div>
                        <div class="h2"><span class="h3 fw-900">產品價格</span></div>
                        <div class="h2"><span class="h3 fw-900">產品尺寸</span></div>
                        <div class="h2"><span class="h3 fw-900">配送方式</span></div>
                    </div>
                </div>
            </div>
         </div>
    </div>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/jquery-3.7.1.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        let flag_p_name = false;
        let flag_p_price = false;
        let flag_packing = false;
        let switch01 = '下架'
        $(function(){
            //監聽#p_name
            $("#p_name").on("input",function(){
                // console.log($(this).val().length);
                if($(this).val().length>1 && $(this).val().length<9){
                    //符合規定
                    $(this).removeClass('is-invalid');
                    $(this).addClass('is-valid');
                    flag_p_name = true;
                }
                else{
                    //不符合規定
                    $(this).removeClass('is-valid');
                    $(this).addClass('is-invalid');
                    flag_p_name = false;
                }
            });
            $("#p_price").on("input",function(){
                // console.log($(this).val());
                if($(this).val()>0 && $(this).val()<101){
                    //符合規定
                    $(this).removeClass('is-invalid');
                    $(this).addClass('is-valid');
                    flag_p_price = true;
                }
                else{
                    //不符合規定
                    $(this).removeClass('is-valid');
                    $(this).addClass('is-invalid');
                    flag_p_price = false;
                }
            });

            $("#packing").on("change",function(){
                console.log($(this).val());
                //符合規定
                $(this).removeClass('is-invalid');
                $(this).addClass('is-valid');
                flag_packing = true;
            });
            //監聽switch01
            $("#switch01").on("change",function(){
                console.log($(this).is('checked'));
                if($(this).is(':checked')){
                    //上架
                    $(this).next().text('上架');
                    switch01 = '上架';
                }else{
                    //下架
                    $(this).next().text('下架');
                    switch01 = '下架';
                }
            })
            //監聽count01
            $("#count01").on("input",function(){
                console.log($(this).val());
                $("#count-text").text($(this).val());
            })

            //按鈕監聽#ok_btn
            $("#ok_btn").on("click",function(){
                p_name=$("#p_name").val();
                p_price=$("#p_price").val();
                packing=$("#packing").val();
                count01=$("#count01").val();


                if(flag_p_name && flag_p_price){
                    Swal.fire({
                        title:"成功",
                        text:"產品已建立完成",
                        icon:"success",
                        confirmButtonText:"確定"
                    });
                    //收集配送方式
                    //複選字串呼叫
                    let chk01=[];
                    $.each($("input[name='chk01']:checked"),function(){
                        chk01.push($(this).val());
                    });
                    p_chk01 = chk01.join('/');
                    //單選字串呼叫
                    let radio01 = "";
                    $.each($("input[name='radio01']:checked"),function(){
                        radio01=$(this).val();
                    })

                


                    let strHTML=`
                        <div class="h2"><span class="h3 fw-900">產品名稱:</span>${p_name}</div>
                        <div class="h2"><span class="h3 fw-900">產品價格:</span>${p_price}</div>
                        <div class="h2"><span class="h3 fw-900">產品尺寸:</span>${packing}</div>
                        <div class="h2"><span class="h3 fw-900">配送方式:</span>${p_chk01}</div>
                        <div class="h2"><span class="h3 fw-900">付款方式:</span>${radio01}</div>
                        <div class="h2"><span class="h3 fw-900">商品狀態:</span>${switch01}</div>
                        <div class="h2"><span class="h3 fw-900">商品數量:</span>${count01}</div>`;
                    $("#my_card_body").html(strHTML);
                    // console.log($("#p_name").val());
                    // console.log($("#p_price").val());
                }else{
                    Swal.fire({
                        title:"欄位錯誤!",
                        text:"請修正欄位內容",
                        icon:"error",
                        confirmButtonText:"知道了"
                    });
                    $("#my_card_body").html('');
                    // alert("欄位有錯誤,請修正!");
                }
            });
         
        });
    </script>
</body>
</html>